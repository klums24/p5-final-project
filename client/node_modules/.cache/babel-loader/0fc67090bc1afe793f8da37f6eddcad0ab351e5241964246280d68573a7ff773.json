{"ast":null,"code":"var _jsxFileName = \"/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, createContext, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientContext = /*#__PURE__*/createContext();\nconst ClientProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [currentClient, setCurrentClient] = useState(null);\n  useEffect(() => {\n    fetch(\"/check-user\").then(response => {\n      if (response.ok) {\n        response.json().then(saveClient);\n      }\n    });\n  }, []);\n  const saveClient = new_client => {\n    setCurrentClient(new_client);\n  };\n  const handleEditProfileClick = () => {\n    history.push(`/clients/${currentClient.id}/edit-profile`);\n  };\n  const handleDeleteAccountClick = () => {\n    fetch(`/clients/${currentClient.id}`, {\n      method: \"DELETE\"\n    }).then(response => {\n      if (response.ok) {\n        saveClient(null);\n      }\n    }).catch(e => console.error(e));\n  };\n  const handleSignOutClick = () => {\n    fetch(\"/signout\", {\n      method: \"DELETE\"\n    }).then(() => {\n      setCurrentClient(null);\n    });\n  };\n  if (!currentClient) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: showSigninForm ? /*#__PURE__*/_jsxDEV(SigninForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(NewClientForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 112\n      }, this)\n    }, void 0, false);\n  }\n  return /*#__PURE__*/_jsxDEV(ClientContext.Provider, {\n    value: {\n      currentClient,\n      handleEditProfileClick,\n      handleDeleteAccountClick,\n      handleSignOutClick\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(ClientProvider, \"g0JsP0HL7HhT6QWGSfzPx5cbboY=\");\n_c = ClientProvider;\nexport { ClientContext, ClientProvider };\nvar _c;\n$RefreshReg$(_c, \"ClientProvider\");","map":{"version":3,"names":["useContext","useState","createContext","useEffect","useHistory","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientContext","ClientProvider","_ref","_s","children","currentClient","setCurrentClient","fetch","then","response","ok","json","saveClient","new_client","handleEditProfileClick","history","push","id","handleDeleteAccountClick","method","catch","e","console","error","handleSignOutClick","showSigninForm","SigninForm","handleToggleForm","fileName","_jsxFileName","lineNumber","columnNumber","NewClientForm","Provider","value","_c","$RefreshReg$"],"sources":["/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js"],"sourcesContent":["import {useContext, useState, createContext, useEffect,} from \"react\"\nimport { useHistory } from \"react-router-dom\";\n\nconst ClientContext = createContext()\n\nconst ClientProvider = ({children}) => {\n    const [currentClient, setCurrentClient] = useState(null);\n\n    useEffect(() => {\n        fetch(\"/check-user\")\n        .then(response => {\n          if (response.ok){\n            response.json()\n            .then(saveClient)\n          }\n        })\n    }, [])\n\n    const saveClient = (new_client) => {\n        setCurrentClient(new_client);\n    };\n\n    const handleEditProfileClick = () => {\n        history.push(`/clients/${currentClient.id}/edit-profile`);\n    };\n\n    const handleDeleteAccountClick = () => {\n        fetch(`/clients/${currentClient.id}`, {\n          method: \"DELETE\"\n        })\n        .then(response => {\n          if (response.ok){\n            saveClient(null)    \n          }\n        })\n        .catch(e => console.error(e))\n    };\n\n    const handleSignOutClick= () => {\n        fetch(\"/signout\", {method: \"DELETE\"})\n        .then(() => {\n        setCurrentClient(null);   \n        },);\n    }\n\n    \n\n    if (!currentClient) {\n        return (\n            <>\n                {showSigninForm ? <SigninForm saveClient={saveClient} handleToggleForm={handleToggleForm} /> : <NewClientForm saveClient={saveClient} handleToggleForm={handleToggleForm} />}\n            </>\n        );\n    }\n\n    return (\n        <ClientContext.Provider value={{currentClient, handleEditProfileClick, handleDeleteAccountClick, handleSignOutClick}}>\n            {children}\n        </ClientContext.Provider>\n\n    )\n}\n\nexport {ClientContext, ClientProvider}"],"mappings":";;AAAA,SAAQA,UAAU,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,SAAS,QAAQ,OAAO;AACrE,SAASC,UAAU,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE9C,MAAMC,aAAa,gBAAGP,aAAa,CAAC,CAAC;AAErC,MAAMQ,cAAc,GAAGC,IAAA,IAAgB;EAAAC,EAAA;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAF,IAAA;EAC9B,MAAM,CAACG,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAExDE,SAAS,CAAC,MAAM;IACZa,KAAK,CAAC,aAAa,CAAC,CACnBC,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,EAAE,EAAC;QACdD,QAAQ,CAACE,IAAI,CAAC,CAAC,CACdH,IAAI,CAACI,UAAU,CAAC;MACnB;IACF,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,UAAU,GAAIC,UAAU,IAAK;IAC/BP,gBAAgB,CAACO,UAAU,CAAC;EAChC,CAAC;EAED,MAAMC,sBAAsB,GAAGA,CAAA,KAAM;IACjCC,OAAO,CAACC,IAAI,CAAE,YAAWX,aAAa,CAACY,EAAG,eAAc,CAAC;EAC7D,CAAC;EAED,MAAMC,wBAAwB,GAAGA,CAAA,KAAM;IACnCX,KAAK,CAAE,YAAWF,aAAa,CAACY,EAAG,EAAC,EAAE;MACpCE,MAAM,EAAE;IACV,CAAC,CAAC,CACDX,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,EAAE,EAAC;QACdE,UAAU,CAAC,IAAI,CAAC;MAClB;IACF,CAAC,CAAC,CACDQ,KAAK,CAACC,CAAC,IAAIC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC,CAAC;EACjC,CAAC;EAED,MAAMG,kBAAkB,GAAEA,CAAA,KAAM;IAC5BjB,KAAK,CAAC,UAAU,EAAE;MAACY,MAAM,EAAE;IAAQ,CAAC,CAAC,CACpCX,IAAI,CAAC,MAAM;MACZF,gBAAgB,CAAC,IAAI,CAAC;IACtB,CAAE,CAAC;EACP,CAAC;EAID,IAAI,CAACD,aAAa,EAAE;IAChB,oBACIR,OAAA,CAAAE,SAAA;MAAAK,QAAA,EACKqB,cAAc,gBAAG5B,OAAA,CAAC6B,UAAU;QAACd,UAAU,EAAEA,UAAW;QAACe,gBAAgB,EAAEA;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAAGlC,OAAA,CAACmC,aAAa;QAACpB,UAAU,EAAEA,UAAW;QAACe,gBAAgB,EAAEA;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC,gBAC9K,CAAC;EAEX;EAEA,oBACIlC,OAAA,CAACG,aAAa,CAACiC,QAAQ;IAACC,KAAK,EAAE;MAAC7B,aAAa;MAAES,sBAAsB;MAAEI,wBAAwB;MAAEM;IAAkB,CAAE;IAAApB,QAAA,EAChHA;EAAQ;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAGjC,CAAC;AAAA5B,EAAA,CAxDKF,cAAc;AAAAkC,EAAA,GAAdlC,cAAc;AA0DpB,SAAQD,aAAa,EAAEC,cAAc;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}