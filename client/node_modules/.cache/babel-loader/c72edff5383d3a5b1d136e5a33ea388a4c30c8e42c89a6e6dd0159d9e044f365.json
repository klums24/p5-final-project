{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nconst NEW_CHAT_MESSAGE_EVENT = \"newChatMessage\"; // Name of the event\nconst SOCKET_SERVER_URL = \"http://localhost:4001\";\nconst useChat = roomId => {\n  _s();\n  const [messages, setMessages] = useState([]); // Sent and received messages\n  const socketRef = useRef();\n  useEffect(() => {\n    // Creates a WebSocket connection\n    socketRef.current = socketIOClient(SOCKET_SERVER_URL, {\n      query: {\n        roomId\n      }\n    });\n\n    // Listens for incoming messages\n    socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, message => {\n      const incomingMessage = {\n        ...message,\n        ownedByCurrentUser: message.senderId === socketRef.current.id\n      };\n      setMessages(messages => [...messages, incomingMessage]);\n    });\n\n    // Destroys the socket reference\n    // when the connection is closed\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [roomId]);\n\n  // Sends a message to the server that\n  // forwards it to all users in the same room\n  const sendMessage = messageBody => {\n    socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, {\n      body: messageBody,\n      senderId: socketRef.current.id\n    });\n  };\n  return {\n    messages,\n    sendMessage\n  };\n};\n_s(useChat, \"rJUxOyV7d92WYkbiDZQ/Q3CnO+M=\");\nexport default useChat;","map":{"version":3,"names":["useEffect","useRef","useState","socketIOClient","NEW_CHAT_MESSAGE_EVENT","SOCKET_SERVER_URL","useChat","roomId","_s","messages","setMessages","socketRef","current","query","on","message","incomingMessage","ownedByCurrentUser","senderId","id","disconnect","sendMessage","messageBody","emit","body"],"sources":["/home/klums24/Development/code/phase-5/p5-final-project/client/src/components/UseChat.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nconst NEW_CHAT_MESSAGE_EVENT = \"newChatMessage\"; // Name of the event\nconst SOCKET_SERVER_URL = \"http://localhost:4001\";\n\nconst useChat = (roomId) => {\n  const [messages, setMessages] = useState([]); // Sent and received messages\n  const socketRef = useRef();\n\n  useEffect(() => {\n    \n    // Creates a WebSocket connection\n    socketRef.current = socketIOClient(SOCKET_SERVER_URL, {\n      query: { roomId },\n    });\n    \n    // Listens for incoming messages\n    socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, (message) => {\n      const incomingMessage = {\n        ...message,\n        ownedByCurrentUser: message.senderId === socketRef.current.id,\n      };\n      setMessages((messages) => [...messages, incomingMessage]);\n    });\n    \n    // Destroys the socket reference\n    // when the connection is closed\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [roomId]);\n\n  // Sends a message to the server that\n  // forwards it to all users in the same room\n  const sendMessage = (messageBody) => {\n    socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, {\n      body: messageBody,\n      senderId: socketRef.current.id,\n    });\n  };\n\n  return { messages, sendMessage };\n};\n\nexport default useChat;"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,OAAOC,cAAc,MAAM,kBAAkB;AAE7C,MAAMC,sBAAsB,GAAG,gBAAgB,CAAC,CAAC;AACjD,MAAMC,iBAAiB,GAAG,uBAAuB;AAEjD,MAAMC,OAAO,GAAIC,MAAM,IAAK;EAAAC,EAAA;EAC1B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAMS,SAAS,GAAGV,MAAM,CAAC,CAAC;EAE1BD,SAAS,CAAC,MAAM;IAEd;IACAW,SAAS,CAACC,OAAO,GAAGT,cAAc,CAACE,iBAAiB,EAAE;MACpDQ,KAAK,EAAE;QAAEN;MAAO;IAClB,CAAC,CAAC;;IAEF;IACAI,SAAS,CAACC,OAAO,CAACE,EAAE,CAACV,sBAAsB,EAAGW,OAAO,IAAK;MACxD,MAAMC,eAAe,GAAG;QACtB,GAAGD,OAAO;QACVE,kBAAkB,EAAEF,OAAO,CAACG,QAAQ,KAAKP,SAAS,CAACC,OAAO,CAACO;MAC7D,CAAC;MACDT,WAAW,CAAED,QAAQ,IAAK,CAAC,GAAGA,QAAQ,EAAEO,eAAe,CAAC,CAAC;IAC3D,CAAC,CAAC;;IAEF;IACA;IACA,OAAO,MAAM;MACXL,SAAS,CAACC,OAAO,CAACQ,UAAU,CAAC,CAAC;IAChC,CAAC;EACH,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;;EAEZ;EACA;EACA,MAAMc,WAAW,GAAIC,WAAW,IAAK;IACnCX,SAAS,CAACC,OAAO,CAACW,IAAI,CAACnB,sBAAsB,EAAE;MAC7CoB,IAAI,EAAEF,WAAW;MACjBJ,QAAQ,EAAEP,SAAS,CAACC,OAAO,CAACO;IAC9B,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IAAEV,QAAQ;IAAEY;EAAY,CAAC;AAClC,CAAC;AAACb,EAAA,CArCIF,OAAO;AAuCb,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}