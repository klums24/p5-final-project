{"ast":null,"code":"var _jsxFileName = \"/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, createContext, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport SignInForm from \"../components/SignInForm\";\nimport NewClientForm from \"../components/NewClientForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientContext = /*#__PURE__*/createContext();\nconst ClientProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [currentClient, setCurrentClient] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    fetch(\"/check-user\").then(response => {\n      if (response.ok) {\n        response.json().then(saveClient);\n      }\n    });\n  }, []);\n  const saveClient = new_client => {\n    setCurrentClient(new_client);\n  };\n  const handleToggleForm = () => {\n    setShowSigninForm(value => !value);\n  };\n  const handleEditProfileClick = () => {\n    history.push(`/clients/${currentClient.id}/edit-profile`);\n  };\n  const handleDeleteAccountClick = () => {\n    fetch(`/clients/${currentClient.id}`, {\n      method: \"DELETE\"\n    }).then(response => {\n      if (response.ok) {\n        saveClient(null);\n      }\n    }).catch(e => console.error(e));\n  };\n  const handleSignOutClick = () => {\n    fetch(\"/signout\", {\n      method: \"DELETE\"\n    }).then(() => {\n      setCurrentClient(null);\n    });\n  };\n  if (!currentClient) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: showSigninForm ? /*#__PURE__*/_jsxDEV(SignInForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(NewClientForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 112\n      }, this)\n    }, void 0, false);\n  }\n  return /*#__PURE__*/_jsxDEV(ClientContext.Provider, {\n    value: {\n      currentClient,\n      handleEditProfileClick,\n      handleDeleteAccountClick,\n      handleSignOutClick\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(ClientProvider, \"9VuQVl267Ro2Ks2K2MwuQzeCZlU=\", false, function () {\n  return [useHistory];\n});\n_c = ClientProvider;\nexport { ClientContext, ClientProvider };\nvar _c;\n$RefreshReg$(_c, \"ClientProvider\");","map":{"version":3,"names":["useContext","useState","createContext","useEffect","useHistory","SignInForm","NewClientForm","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientContext","ClientProvider","_ref","_s","children","currentClient","setCurrentClient","history","fetch","then","response","ok","json","saveClient","new_client","handleToggleForm","setShowSigninForm","value","handleEditProfileClick","push","id","handleDeleteAccountClick","method","catch","e","console","error","handleSignOutClick","showSigninForm","fileName","_jsxFileName","lineNumber","columnNumber","Provider","_c","$RefreshReg$"],"sources":["/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js"],"sourcesContent":["import {useContext, useState, createContext, useEffect,} from \"react\"\nimport { useHistory } from \"react-router-dom\";\nimport SignInForm from \"../components/SignInForm\";\nimport NewClientForm from \"../components/NewClientForm\";\nconst ClientContext = createContext()\nconst ClientProvider = ({children}) => {\n\n    const [currentClient, setCurrentClient] = useState(null);\n    const history = useHistory()\n\n    useEffect(() => {\n        fetch(\"/check-user\")\n        .then(response => {\n          if (response.ok){\n            response.json()\n            .then(saveClient)\n          }\n        })\n    }, [])\n\n    const saveClient = (new_client) => {\n        setCurrentClient(new_client);\n    };\n    \n    const handleToggleForm = () => {\n        setShowSigninForm(value => !value);\n    };\n    const handleEditProfileClick = () => {\n        history.push(`/clients/${currentClient.id}/edit-profile`);\n    };\n\n    const handleDeleteAccountClick = () => {\n        fetch(`/clients/${currentClient.id}`, {\n          method: \"DELETE\"\n        })\n        .then(response => {\n          if (response.ok){\n            saveClient(null)    \n          }\n        })\n        .catch(e => console.error(e))\n    };\n\n    const handleSignOutClick= () => {\n        fetch(\"/signout\", {method: \"DELETE\"})\n        .then(() => {\n        setCurrentClient(null);   \n        },);\n    }\n\n    \n\n    if (!currentClient) {\n        return (\n            <>\n                {showSigninForm ? <SignInForm saveClient={saveClient} handleToggleForm={handleToggleForm} /> : <NewClientForm saveClient={saveClient} handleToggleForm={handleToggleForm} />}\n            </>\n        );\n    }\n\n    return (\n        <ClientContext.Provider value={{currentClient, handleEditProfileClick, handleDeleteAccountClick, handleSignOutClick}}>\n            {children}\n        </ClientContext.Provider>\n\n    )\n}\n\nexport {ClientContext, ClientProvider}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}