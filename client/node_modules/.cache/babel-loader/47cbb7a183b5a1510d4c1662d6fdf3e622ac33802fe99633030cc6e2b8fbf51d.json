{"ast":null,"code":"var _jsxFileName = \"/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, createContext, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport SignInForm from \"../components/SignInForm\";\nimport NewClientForm from \"../components/NewClientForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientContext = /*#__PURE__*/createContext();\nconst ClientProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [currentClient, setCurrentClient] = useState(null);\n  const [showSigninForm, setShowSigninForm] = useState(false);\n  const history = useHistory();\n  const saveClient = new_client => {\n    setCurrentClient(new_client);\n  };\n  useEffect(() => {\n    fetch(\"/check-user\").then(response => {\n      if (response.ok) {\n        response.json().then(saveClient);\n      }\n    });\n  }, []);\n  const handleToggleForm = () => {\n    setShowSigninForm(value => !value);\n  };\n  const handleDeleteAccountClick = () => {\n    fetch(`/clients/${currentClient.id}`, {\n      method: \"DELETE\"\n    }).then(response => {\n      if (response.ok) {\n        saveClient(null);\n      }\n    }).catch(e => console.error(e));\n  };\n  const handleSignOutClick = () => {\n    fetch(\"/signout\", {\n      method: \"DELETE\"\n    }).then(() => {\n      setCurrentClient(null);\n    });\n  };\n  if (!currentClient) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: showSigninForm ? /*#__PURE__*/_jsxDEV(SignInForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(NewClientForm, {\n        saveClient: saveClient,\n        handleToggleForm: handleToggleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 112\n      }, this)\n    }, void 0, false);\n  }\n  return /*#__PURE__*/_jsxDEV(ClientContext.Provider, {\n    value: {\n      currentClient,\n      handleDeleteAccountClick,\n      handleSignOutClick,\n      saveClient\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n_s(ClientProvider, \"93eleD7BKIymXz3ls+X9kmyPgQc=\", false, function () {\n  return [useHistory];\n});\n_c = ClientProvider;\nexport { ClientContext, ClientProvider };\nvar _c;\n$RefreshReg$(_c, \"ClientProvider\");","map":{"version":3,"names":["useContext","useState","createContext","useEffect","useHistory","SignInForm","NewClientForm","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientContext","ClientProvider","_ref","_s","children","currentClient","setCurrentClient","showSigninForm","setShowSigninForm","history","saveClient","new_client","fetch","then","response","ok","json","handleToggleForm","value","handleDeleteAccountClick","id","method","catch","e","console","error","handleSignOutClick","fileName","_jsxFileName","lineNumber","columnNumber","Provider","_c","$RefreshReg$"],"sources":["/home/klums24/Development/code/phase-5/p5-final-project/client/src/context/clientContext.js"],"sourcesContent":["import {useContext, useState, createContext, useEffect,} from \"react\"\nimport { useHistory } from \"react-router-dom\";\nimport SignInForm from \"../components/SignInForm\";\nimport NewClientForm from \"../components/NewClientForm\";\n\n\nconst ClientContext = createContext()\n\nconst ClientProvider = ({children}) => {\n\n    const [currentClient, setCurrentClient] = useState(null);\n    const [showSigninForm, setShowSigninForm] = useState(false);\n    const history = useHistory()\n\n    const saveClient = (new_client) => {\n        setCurrentClient(new_client);\n    };\n\n    useEffect(() => {\n        fetch(\"/check-user\")\n        .then(response => {\n          if (response.ok){\n            response.json()\n            .then(saveClient)\n          }\n        })\n    }, [])\n\n    \n\n    const handleToggleForm = () => {\n        setShowSigninForm(value => !value);\n    };\n    \n    \n    const handleDeleteAccountClick = () => {\n        fetch(`/clients/${currentClient.id}`, {\n          method: \"DELETE\"\n        })\n        .then(response => {\n          if (response.ok){\n            saveClient(null)    \n          }\n        })\n        .catch(e => console.error(e))\n    };\n\n    const handleSignOutClick= () => {\n        fetch(\"/signout\", {method: \"DELETE\"})\n        .then(() => {\n        setCurrentClient(null);   \n        },);\n    }\n\n    \n\n    if (!currentClient) {\n        return (\n            <>\n                {showSigninForm ? <SignInForm saveClient={saveClient} handleToggleForm={handleToggleForm} /> : <NewClientForm saveClient={saveClient} handleToggleForm={handleToggleForm} />}\n            </>\n        );\n    }\n\n    return (\n        <ClientContext.Provider value={{currentClient, handleDeleteAccountClick, handleSignOutClick, saveClient}}>\n            {children}\n        </ClientContext.Provider>\n\n    )\n}\n\nexport {ClientContext, ClientProvider}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}